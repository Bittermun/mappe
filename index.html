<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Great Depression: A Visual History</title>
  <link rel="stylesheet" href="/src/style.css" />
</head>

<body>
  <div id="map"></div>
  <div class="scanline-overlay"></div>

  <!-- Toast Notifications -->
  <div id="toast-container"></div>

  <!-- TACTICAL HUD OVERLAY -->
  <div id="hud-overlay">

    <!-- TOP-LEFT: MISSION RECORDS -->
    <div class="hud-module tl">
      <div class="bracket-tl"></div>
      <div class="hud-content">
        <div class="hud-title" id="scenario-title">LOADING RECORDS...</div>
        <div class="telemetry-row">
          <span class="label">DATE TRACKER:</span>
          <span class="value" id="date-val">---</span>
        </div>
        <div class="telemetry-row">
          <span class="label">OPERATION MODE:</span>
          <span class="value" id="mode-val">OBSERVATION</span>
        </div>
        <div class="mt-10">
          <button id="toggle-btn" class="mini-btn">SWITCH MAP VIEW</button>
        </div>
      </div>
    </div>

    <!-- TOP-RIGHT: TELEGRAM LOGS -->
    <div class="hud-module tr">
      <div class="bracket-tr"></div>
      <div class="hud-content">
        <div class="module-header">TELEGRAM LOGS</div>
        <div id="ticker-tape" class="compact-ticker">
          <div class="ticker-entry placeholder">AWAITING TELEGRAMS...</div>
        </div>
      </div>
    </div>

    <!-- BOTTOM-LEFT: SYSTEM STATISTICS -->
    <div class="hud-module bl">
      <div class="bracket-bl"></div>
      <div class="hud-content">
        <div class="module-header">NATIONAL STATISTICS</div>
        <div class="gauge-module">
          <div class="gauge-row">
            <span class="label">GDP</span>
            <div class="gauge-track">
              <div id="gdp-gauge" class="gauge-fill"></div>
            </div>
            <span id="gdp-val" class="value">---</span>
          </div>
          <div class="gauge-row">
            <span class="label">SOC</span>
            <div class="gauge-track">
              <div id="social-gauge" class="gauge-fill"></div>
            </div>
            <span id="social-val" class="value">---</span>
          </div>
        </div>
        <div class="mini-graph" id="economic-mini-graph"></div>
        <div class="stat-grid-compact">
          <div class="stat-unit">ALT:<span id="altitude-val">---</span></div>
          <div class="stat-unit">ZOM:<span id="zoom-val">---</span></div>
        </div>
      </div>
    </div>

    <!-- BOTTOM-RIGHT: FINANCIAL TICKER -->
    <div class="hud-module br" id="market-hud-compact">
      <div class="bracket-br"></div>
      <div class="hud-content">
        <div class="module-header">MARKET FEED <button id="expand-market-btn" class="mini-btn">OPEN BOARD</button></div>
        <div id="stock-list" class="market-ticker-compact"></div>
      </div>
    </div>

    <!-- TIMELINE CENTER HUD -->
    <div id="timeline-hud">
      <div class="timeline-container-hud">
        <span id="timeline-start" class="label">----</span>
        <div class="timeline-track-hud">
          <div id="timeline-fill" class="fill"></div>
          <div id="timeline-thumb" class="thumb"></div>
        </div>
        <span id="timeline-end" class="label">----</span>
      </div>
      <div class="time-controls-hud">
        <button id="play-btn">PLAY</button>
        <button id="time-day">+1D</button>
        <button id="time-week">+1W</button>
        <button id="time-month">+1M</button>
      </div>
    </div>

    <!-- PROBE TELEMETRY (DYNAMIC) -->
    <div id="probe-hud" class="hidden">
      <div class="bracket-probe"></div>
      <div id="region-info-content"></div>
    </div>

    <!-- MARKET OPERATIONS THEATER (LARGE PANEL) -->
    <div id="market-operations-theater" class="hidden">
      <div class="theater-background"></div>
      <div class="theater-content">
        <div class="theater-header">
          <div class="title-block">
            <span class="classification">CONFIDENTIAL: MARKET LOGS</span>
            <h2>INDUSTRIAL FINANCIAL BOARD</h2>
          </div>
          <div class="theater-tabs">
            <button id="tab-market" class="tab-btn active">FINANCIAL FEED</button>
            <button id="tab-trade" class="tab-btn">TRADE STATISTICS</button>
          </div>
          <button id="close-market-btn" class="close-btn">CLOSE BOARD</button>
        </div>

        <div id="market-board" class="theater-grid">
          <div class="theater-left">
            <div class="visual-feed">
              <div class="dither-overlay"></div>
              <div class="feed-label">NYSE FLOOR - STATION 04</div>
            </div>
            <div class="market-stats-theater">
              <div class="stat-unit">DOW JONES:<span id="dow-val-bg">---</span></div>
              <div class="stat-unit">STABILITY:<span id="mkt-stability">STABLE</span></div>
            </div>
          </div>
          <div class="theater-right">
            <div class="graph-container-large">
              <div class="graph-header">
                INDUSTRIAL TREND CHART
                <div class="timeframe-tabs">
                  <button id="tf-1y" class="tab-btn active">1 YEAR</button>
                  <button id="tf-5y" class="tab-btn">5 YEARS</button>
                  <button id="tf-max" class="tab-btn">MAX</button>
                </div>
              </div>
              <div id="market-large-graph" style="height: 100%; width: 100%;"></div>
            </div>
            <div id="stock-list-large" class="market-ticker-large"></div>
          </div>
        </div>

        <div id="trade-board" class="theater-grid hidden">
          <div class="theater-left">
            <div class="trade-stats-card">
              <div class="feed-label">DEPT. OF COMMERCE - BUREAU OF TRADE</div>
              <div class="large-val-display">
                <span class="label">TOTAL EXPORT VOLUME</span>
                <span id="trade-total-val" class="value">$0.00B</span>
              </div>
              <div class="report-section">
                <h3>LARGEST EXPORTS (BY SECTOR)</h3>
                <div id="export-bar-chart" class="bar-chart"></div>
              </div>
            </div>
          </div>
          <div class="theater-right">
            <div class="report-section">
              <h3>PRINCIPAL TRADING PARTNERS</h3>
              <div class="pie-report-layout">
                <div id="partner-pie-chart" class="pie-chart"></div>
                <div id="partner-legend" class="chart-legend"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Region Detail Panel -->
  <div id="region-panel" class="hidden">
    <div class="panel-header">
      <h2 id="region-name">SELECT A REGION</h2>
      <button id="close-region-panel">✕</button>
    </div>
    <div class="region-stats">
      <div class="stat-row">
        <span class="stat-label">State:</span>
        <span id="region-state">-</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Population (1930):</span>
        <span id="region-pop">-</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Pop. Change since 1920:</span>
        <span id="region-pop-change">-</span>
      </div>
      <div class="stat-row unemployment">
        <span class="stat-label">Unemployment (1932 est.):</span>
        <span id="region-unemployment">-</span>
      </div>
    </div>
    <div class="region-industries">
      <h3>INDUSTRIES</h3>
      <ul id="region-industries-list"></ul>
    </div>
    <div class="region-employers">
      <h3>MAJOR EMPLOYERS</h3>
      <ul id="region-employers-list"></ul>
    </div>
    <div class="region-notes">
      <p id="region-notes-text"></p>
    </div>
  </div>

  <!-- Control Panel -->
  <div id="control-panel" class="hidden">
    <div class="panel-header">
      <h2>LAYER CONTROLS</h2>
      <button id="close-panel">✕</button>
    </div>

    <!-- Contour Controls -->
    <div class="control-section">
      <h3>CONTOURS</h3>
      <label>
        <span>Opacity</span>
        <input type="range" id="contour-opacity" min="0" max="100" value="60" />
        <span id="contour-opacity-val">60%</span>
      </label>
      <label>
        <span>Width</span>
        <input type="range" id="contour-width" min="1" max="10" value="3" />
        <span id="contour-width-val">3</span>
      </label>
      <label>
        <span>Glow</span>
        <input type="range" id="contour-glow" min="0" max="10" value="2" />
        <span id="contour-glow-val">2</span>
      </label>
    </div>

    <!-- Hillshade Controls -->
    <div class="control-section">
      <h3>TERRAIN</h3>
      <div class="radio-group">
        <label class="radio-label">
          <input type="radio" name="terrain-mode" value="both" checked />
          <span>Both</span>
        </label>
        <label class="radio-label">
          <input type="radio" name="terrain-mode" value="hillshade" />
          <span>Hillshade</span>
        </label>
        <label class="radio-label">
          <input type="radio" name="terrain-mode" value="contours" />
          <span>Contours</span>
        </label>
      </div>
      <label>
        <span>Hillshade Intensity</span>
        <input type="range" id="hillshade-intensity" min="0" max="100" value="50" />
        <span id="hillshade-intensity-val">50</span>
      </label>
    </div>

    <!-- Cityscape Controls -->
    <div class="control-section">
      <h3>CITYSCAPE</h3>
      <label>
        <span>Opacity</span>
        <input type="range" id="city-opacity" min="0" max="100" value="80" />
        <span id="city-opacity-val">80%</span>
      </label>
      <label>
        <span>Glow Intensity</span>
        <input type="range" id="city-glow" min="0" max="10" value="4" />
        <span id="city-glow-val">4</span>
      </label>
    </div>

    <!-- Road Detail Controls -->
    <div class="control-section">
      <h3>ROADS</h3>
      <label>
        <span>Min Zoom (detail level)</span>
        <input type="range" id="road-min-zoom" min="0" max="10" value="4" />
        <span id="road-min-zoom-val">4</span>
      </label>
      <p style="font-size: 11px; color: #888; margin-top: 4px;">
        Lower = see roads zoomed out more. Set to 0 for max detail.
      </p>
    </div>

    <!-- Layer Toggles -->
    <div class="control-section">
      <h3>LAYERS</h3>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-crt" checked />
        <span>Scanlines (CRT)</span>
      </label>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-hillshade" checked />
        <span>Hillshade</span>
      </label>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-contours" checked />
        <span>Contours</span>
      </label>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-cities" checked />
        <span>Cities</span>
      </label>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-water" checked />
        <span>Water</span>
      </label>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-roads" checked />
        <span>Roads</span>
      </label>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-rail" checked />
        <span>Rail</span>
      </label>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>